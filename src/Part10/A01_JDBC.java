package Part10;

/**
 * @author liyanpeng
 * @date 2025/5/7
 * @description TODO
 */

/**
 * âœ… JDBC æ˜¯ä»€ä¹ˆï¼Ÿ
 * JDBCï¼ˆJava Database Connectivityï¼‰ æ˜¯ Java æä¾›çš„ä¸€å¥—ç”¨äºè®¿é—®å…³ç³»å‹æ•°æ®åº“çš„ APIï¼ˆåº”ç”¨ç¨‹åºæ¥å£ï¼‰ã€‚
 * JDBC ä½¿å¾— Java ç¨‹åºå¯ä»¥ä½¿ç”¨ç»Ÿä¸€çš„æ–¹å¼è¿æ¥å„ç§æ•°æ®åº“ï¼Œæ‰§è¡Œ SQL æŸ¥è¯¢ã€æ›´æ–°ã€äº‹åŠ¡ç®¡ç†ç­‰æ“ä½œã€‚
 * <p>
 * ğŸ¯ JDBC çš„ä¸»è¦åŠŸèƒ½ï¼š
 * è¿æ¥æ•°æ®åº“ï¼ˆå¦‚ MySQLã€PostgreSQLã€Oracle ç­‰ï¼‰
 * æ‰§è¡Œ SQL æŸ¥è¯¢ï¼ˆSELECTã€INSERTã€UPDATEã€DELETEï¼‰
 * è·å–æŸ¥è¯¢ç»“æœ
 * ç®¡ç†äº‹åŠ¡ï¼ˆcommit / rollbackï¼‰
 * ä½¿ç”¨ PreparedStatement è¿›è¡Œé¢„å¤„ç†ï¼ˆé˜²æ­¢ SQL æ³¨å…¥ï¼‰
 * <p>
 * ğŸ§± JDBC çš„åŸºæœ¬ç»„æˆç±»ï¼š
 * | ç±» / æ¥å£                            | è¯´æ˜                |
 * | --------------------------------- | ----------------- |
 * | `DriverManager`                   | ç”¨äºåŠ è½½æ•°æ®åº“é©±åŠ¨ï¼Œç®¡ç†æ•°æ®åº“è¿æ¥ |
 * | `Connection`                      | è¡¨ç¤ºæ•°æ®åº“è¿æ¥å¯¹è±¡         |
 * | `Statement` / `PreparedStatement` | ç”¨äºæ‰§è¡Œ SQL è¯­å¥       |
 * | `ResultSet`                       | ç”¨äºå­˜å‚¨ SQL æŸ¥è¯¢ç»“æœ     |
 * | `SQLException`                    | ç”¨äºæ•æ‰æ•°æ®åº“æ“ä½œä¸­å‘ç”Ÿçš„å¼‚å¸¸   |
 * <p>
 * <p>
 * ğŸ§© JDBC é©±åŠ¨ï¼ˆJDBC Driverï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ
 * JDBC Driver æ˜¯æ•°æ®åº“å‚å•†æä¾›çš„å®ç° JDBC æ¥å£çš„ç±»åº“ï¼Œç”¨äºè¿æ¥ç‰¹å®šç±»å‹çš„æ•°æ®åº“ã€‚
 * Java æœ¬èº«å¹¶ä¸å†…ç½®æ‰€æœ‰æ•°æ®åº“çš„é©±åŠ¨ï¼Œå› æ­¤ä½ éœ€è¦ä¸ºä½ çš„æ•°æ®åº“å¯¼å…¥ç›¸åº”çš„ JDBC é©±åŠ¨ï¼ˆJAR åŒ…ï¼‰ã€‚
 * <p>
 * ğŸ“¦ å¸¸è§ JDBC é©±åŠ¨ä¾‹å­ï¼š
 * | æ•°æ®åº“ç±»å‹      | JDBC é©±åŠ¨ JAR åŒ…ï¼ˆå¸¸ç”¨ç±»ï¼‰                            |
 * | ---------- | --------------------------------------------- |
 * | MySQL      | `com.mysql.cj.jdbc.Driver`ï¼ˆmysql-connector-jï¼‰ |
 * | PostgreSQL | `org.postgresql.Driver`ï¼ˆpostgresql-xx.jarï¼‰    |
 * | Oracle     | `oracle.jdbc.driver.OracleDriver`ï¼ˆojdbc8.jarï¼‰ |
 * | SQLite     | `org.sqlite.JDBC`ï¼ˆsqlite-jdbc.jarï¼‰            |
 */

import java.sql.*;

public class A01_JDBC {
    // è‡ªåŠ¨ç”Ÿæˆ main æ–¹æ³•
    public static void main(String[] args) {
        // TODO
        /**
         * ä½¿ç”¨ JDBC è¿›è¡Œæ•°æ®åº“è¿æ¥å’Œæ“ä½œæ—¶ï¼Œå¸¸ç”¨çš„ä¸»è¦æ¥å£å’Œç±»çš„ç®€è¦è¯´æ˜ï¼š
         *+----------------------------+-------------------------------------------+------------------------------------+---------------------------------------+
         * | ç±»/æ¥å£                     | æ–¹æ³•ç­¾å                                  | å‚æ•°è¯´æ˜                           | è¿”å›å€¼è¯´æ˜                            |
         * +----------------------------+-------------------------------------------+------------------------------------+---------------------------------------+
         * | java.sql.DriverManager       | static Connection getConnection(String url) | String url, String user, String password | è¿”å›æ•°æ®åº“è¿æ¥å¯¹è±¡                     |
         * +----------------------------+-------------------------------------------+------------------------------------+---------------------------------------+
         * | javax.sql.DataSource         | Connection getConnection()                | æ—                                  | è¿”å›ä¸€ä¸ªæ•°æ®åº“è¿æ¥å¯¹è±¡               |
         * +----------------------------+-------------------------------------------+------------------------------------+---------------------------------------+
         * | java.sql.Connection          | Statement createStatement()               | æ—                                  | è¿”å›ä¸€ä¸ªStatementå¯¹è±¡                |
         * |                             | void close()                              | æ—                                  | æ— è¿”å›å€¼ï¼Œå…³é—­æ•°æ®åº“è¿æ¥               |
         * +----------------------------+-------------------------------------------+------------------------------------+---------------------------------------+
         * | java.sql.PreparedStatement   | ResultSet executeQuery()                  | æ—                                  | è¿”å›ä¸€ä¸ªResultSetå¯¹è±¡                 |
         * |                             | int executeUpdate()                       | æ—                                  | è¿”å›æ›´æ–°å½±å“çš„è¡Œæ•°                    |
         * +----------------------------+-------------------------------------------+------------------------------------+---------------------------------------+
         * | java.sql.ResultSet           | boolean next()                            | æ—                                  | å¦‚æœæœ‰æ›´å¤šè¡Œæ•°æ®ï¼Œè¿”å›true            |
         * |                             | String getString(int columnIndex)         | int columnIndex                    | è¿”å›æŒ‡å®šåˆ—çš„å­—ç¬¦ä¸²å€¼                  |
         * +----------------------------+-------------------------------------------+------------------------------------+---------------------------------------+
         * ä»¥ä¸‹ä¸æ˜¯æ•™ç§‘ä¹¦å†…å®¹
         * | java.sql.ResultSetMetaData   | int getColumnCount()                      | æ—                                  | è¿”å›ResultSetä¸­çš„åˆ—æ•°                |
         * +----------------------------+-------------------------------------------+------------------------------------+---------------------------------------+
         * | java.sql.DataSource          | Connection getConnection()                | æ—                                  | è¿”å›ä¸€ä¸ªæ•°æ®åº“è¿æ¥å¯¹è±¡               |
         * +----------------------------+-------------------------------------------+------------------------------------+---------------------------------------+
         * | java.sql.Statement           | ResultSet executeQuery(String sql)        | String sql                         | è¿”å›ä¸€ä¸ªResultSetå¯¹è±¡ï¼ŒåŒ…å«æŸ¥è¯¢ç»“æœ   |
         * |                             | int executeUpdate(String sql)             | String sql                         | è¿”å›æ›´æ–°å½±å“çš„è¡Œæ•°                    |
         * +----------------------------+-------------------------------------------+------------------------------------+---------------------------------------+
         * | java.sql.SQLException         | String getMessage()                       | æ—                                  | è¿”å›å¼‚å¸¸çš„é”™è¯¯ä¿¡æ¯                    |
         * +----------------------------+-------------------------------------------+------------------------------------+---------------------------------------+
         * | java.sql.Driver              | boolean acceptsURL(String url)            | String url                         | è¿”å›æ˜¯å¦æ¥å—è¯¥URL                     |
         * +----------------------------+-------------------------------------------+------------------------------------+---------------------------------------+
         * | java.sql.CallableStatement   | ResultSet executeQuery()                  | æ—                                  | è¿”å›ä¸€ä¸ªResultSetå¯¹è±¡                 |
         * +----------------------------+-------------------------------------------+------------------------------------+---------------------------------------+
         * | java.sql.DatabaseMetaData    | String getDatabaseProductName()           | æ—                                  | è¿”å›æ•°æ®åº“çš„äº§å“åç§°                 |
         * +----------------------------+-------------------------------------------+------------------------------------+---------------------------------------+
         *
         */
        /**
         * Connectionçš„ä¸¤ä¸ªå–å¾—æ–¹æ³•ï¼ˆéœ€è¦ç”¨æˆ·åå¯†ç å’Œä¸éœ€è¦ç”¨æˆ·åå¯†ç ï¼‰
         *DriverManager.getConnection() æ–¹æ³•ç­¾åä¸€è§ˆ
         * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         * â”‚ æ–¹æ³•ç­¾å                                                                  â”‚ å‚æ•°è¯´æ˜                    â”‚ æŠ›å‡ºå¼‚å¸¸       â”‚ è¯´æ˜                                   â”‚
         * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         * â”‚ public static Connection getConnection(String url)                        â”‚ url: æ•°æ®åº“è¿æ¥URL           â”‚ SQLException   â”‚ ä½¿ç”¨é»˜è®¤é…ç½®è¿æ¥æ•°æ®åº“ï¼ˆä¸å«ç”¨æˆ·åå¯†ç ï¼‰â”‚
         * â”‚                                                                            â”‚                             â”‚                â”‚ ä¸€èˆ¬ä¸æ¨èä½¿ç”¨                           â”‚
         * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         * â”‚ public static Connection getConnection(String url, String user, String pwd)â”‚ url: æ•°æ®åº“è¿æ¥URL           â”‚ SQLException   â”‚ é€šè¿‡æ˜¾å¼ç”¨æˆ·åå’Œå¯†ç è¿æ¥æ•°æ®åº“           â”‚
         * â”‚                                                                            â”‚ user: ç”¨æˆ·å                â”‚                â”‚                                        â”‚
         * â”‚                                                                            â”‚ pwd: å¯†ç                    â”‚                â”‚                                        â”‚
         * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         */


        /**
         * mysql> select * from department;
         * +-----------+-------------+--------------+--------------+
         * | dept_code | dept_name   | dept_address | pilot_number |
         * +-----------+-------------+--------------+--------------+
         * |         1 | Sales       | Tokyo        | 03-3333-xxxx |
         * |         2 | Engineering | Yokohama     | 045-444-xxxx |
         * |         3 | Development | Osaka        | NULL         |
         * |         4 | Marketing   | Fukuoka      | 092-222-xxxx |
         * |         5 | Education   | Tokyo        | NULL         |
         * +-----------+-------------+--------------+--------------+
         * 5 rows in set (0.01 sec)
         */

        Connection con = null;
        PreparedStatement pstmt = null;
        ResultSet rs = null;
        String sql = "SELECT dept_code, dept_name FROM department";

        try {

            // ï¼’ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æŒ‡å®š
            String url = "jdbc:mysql://localhost:3306/golddb?" +
                    "verifyServerCertificate=false&" +
                    "useSSL=false&" +
                    "serverTimezone=Asia/Tokyo";
            // ï¼“ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã®æ¥ç¶š
            con = DriverManager.getConnection(url, "liyp", "rieh1111");
            // ï¼” ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã®å–å¾—
            pstmt = con.prepareStatement(sql);
            // ï¼• SQLæ–‡ã®å®Ÿè¡Œ
            rs = pstmt.executeQuery();
            // ï¼– çµæœã®å–å¾—ã¨å‡¦ç†
            while (rs.next()) {
                System.out.println("dept_code : " + rs.getInt(1));
                System.out.println("dept_name : " + rs.getString(2));
            }
        } catch (SQLException e) {
            e.printStackTrace();
            // ï¼— æ¥ç¶šã®ã‚¯ãƒ­ãƒ¼ã‚º
        } finally {
            try {
                if (rs != null) rs.close();
                if (pstmt != null) pstmt.close();
                if (con != null) con.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }


        /**
         * dept_code : 1
         * dept_name : Sales
         * dept_code : 2
         * dept_name : Engineering
         * dept_code : 3
         * dept_name : Development
         * dept_code : 4
         * dept_name : Marketing
         * dept_code : 5
         * dept_name : Education
         */

    }
}