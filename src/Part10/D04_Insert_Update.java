package Part10;

/**
 * @author liyanpeng
 * @date 2025/5/9
 * @description TODO
 */

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

/**
 * äºŒã€å¯æ›´æ–°çš„ç»“æœé›†ï¼ˆupdatableï¼‰
 * é»˜è®¤æƒ…å†µä¸‹ï¼ŒResultSet æ˜¯åªè¯»çš„ï¼ˆread-onlyï¼‰å’Œåªèƒ½é¡ºåºè¯»å–çš„ï¼ˆforward-onlyï¼‰ï¼Œ
 * ä½†ä½ å¯ä»¥é€šè¿‡ Connection.prepareStatement() çš„é‡è½½æ–¹æ³•ï¼Œ
 * ç”Ÿæˆå¯æ»šåŠ¨ + å¯æ›´æ–°çš„ ResultSetï¼Œä»è€Œç›´æ¥å¯¹æ•°æ®åº“è®°å½•è¿›è¡Œæ›´æ–°ã€æ’å…¥æˆ–åˆ é™¤æ“ä½œã€‚
 * <p>
 * ğŸ”§ å¦‚ä½•åˆ›å»ºå¯æ›´æ–°çš„ ResultSet
 * String sql = "SELECT dept_code, dept_name FROM department";
 * PreparedStatement pstmt = con.prepareStatement(
 * sql,
 * ResultSet.TYPE_SCROLL_SENSITIVE,    // æ”¯æŒæ»šåŠ¨ï¼Œèƒ½æ„ŸçŸ¥æ•°æ®å˜æ›´
 * ResultSet.CONCUR_UPDATABLE          // å…è®¸æ›´æ–°ç»“æœé›†
 * );
 * ResultSet rs = pstmt.executeQuery();
 * <p>
 * <p>
 * âœ… ResultSet æ¥å£ç”¨äºæ›´æ–°çš„ä¸»è¦æ–¹æ³•ä¸€è§ˆè¡¨
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ æ–¹æ³•ç­¾å                                   â”‚ å‚æ•°è¯´æ˜                   â”‚ æŠ›å‡ºå¼‚å¸¸     â”‚ è¯´æ˜                                         â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚ void updateXXX(int columnIndex, value)      â”‚ columnIndex: åˆ—åºå·        â”‚ SQLException â”‚ æ›´æ–°å½“å‰è¡Œçš„æŒ‡å®šåˆ—çš„å€¼ï¼Œä¸ç«‹å³åæ˜ åˆ°DB     â”‚
 * â”‚                                             â”‚ value: æ–°çš„å€¼               â”‚              â”‚ å¿…é¡»åç»­è°ƒç”¨ `updateRow()`                  â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚ void updateXXX(String columnLabel, value)   â”‚ columnLabel: åˆ—å           â”‚ SQLException â”‚ åŒä¸Šï¼ŒæŒ‰åˆ—åè®¾å®š                            â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚ void updateRow()                            â”‚ æ—                          â”‚ SQLException â”‚ å°†å½“å‰è¡Œçš„ä¿®æ”¹åŒæ­¥åˆ°æ•°æ®åº“                 â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚ void moveToInsertRow()                      â”‚ æ—                          â”‚ SQLException â”‚ ç§»åŠ¨åˆ°æ’å…¥æ¨¡å¼ï¼Œå‡†å¤‡è°ƒç”¨ `updateXXX()` æ’å…¥å€¼â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚ void insertRow()                            â”‚ æ—                          â”‚ SQLException â”‚ æ’å…¥ä¸€è¡Œæ–°è®°å½•åˆ°æ•°æ®åº“                      â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚ void deleteRow()                            â”‚ æ—                          â”‚ SQLException â”‚ åˆ é™¤å½“å‰è¡Œ                                  â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚ void moveToCurrentRow()                     â”‚ æ—                          â”‚ SQLException â”‚ è¿”å›åˆ°æ’å…¥å‰çš„ä½ç½®                         â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 * <p>
 * âœ… ä½¿ç”¨ç¤ºä¾‹
 * rs.absolute(2);  // ç§»åŠ¨åˆ°ç¬¬2è¡Œ
 * rs.updateString("dept_name", "æ–°åç§°");
 * rs.updateRow();  // æäº¤æ›´æ–°
 * <p>
 * rs.moveToInsertRow();  // å‡†å¤‡æ’å…¥
 * rs.updateInt("dept_code", 999);
 * rs.updateString("dept_name", "æ–°éƒ¨é—¨");
 * rs.insertRow();         // æ’å…¥åˆ°æ•°æ®åº“
 * rs.moveToCurrentRow();  // è¿”å›å½“å‰ä½ç½®
 */
public class D04_Insert_Update {
    // è‡ªåŠ¨ç”Ÿæˆ main æ–¹æ³•
    public static void main(String[] args) {
        // TODO
        String sql = "SELECT dept_code, dept_address,dept_name,pilot_number FROM department " +
                "WHERE dept_code = 4";
        try (Connection con = DbConnector.getConnect();
             PreparedStatement pstmt = con.prepareStatement(
                     sql,
                     ResultSet.TYPE_SCROLL_INSENSITIVE,
                     ResultSet.CONCUR_UPDATABLE)) {
            ResultSet rs = pstmt.executeQuery();
            if (rs.next()) System.out.println(rs.getString(2));
            rs.updateString(2, "Chiba");
            rs.updateRow();


            rs.moveToInsertRow();  // å‡†å¤‡æ’å…¥
            rs.updateInt("dept_code", 999);
            rs.updateString("dept_name", "æ–°éƒ¨é—¨");
            rs.updateString("dept_address", "China");
            rs.updateString("pilot_number", "000-XXXX-XXXX");
            rs.insertRow();         // æ’å…¥åˆ°æ•°æ®åº“
            rs.moveToCurrentRow();  // è¿”å›å½“å‰ä½ç½®

        } catch (SQLException e) {
            e.printStackTrace();
        }

        /**
         * Fukuoka
         */
    }
}